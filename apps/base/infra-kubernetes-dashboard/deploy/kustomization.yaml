apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: infra-kubernetes-dashboard

labels:
  - includeSelectors: false
    pairs:
      app.kubernetes.io/name: kubernetes-dashboard

resources:
- namespace.yaml
- ../../_common/deploy
- manifests.yaml
- ingress.yaml
- dashboard-api-networkPolicy.yaml
- dashboard-auth-networkPolicy.yaml
- dashboard-kong-networkPolicy.yaml
- dashboard-metrics-scraper-networkPolicy.yaml
- dashboard-web-resources.yaml
- clusterRoleBinding.yaml
- serviceAccount.yaml

patches:
- path: patches/dashboard-api-deployment-resources.yaml
- path: patches/dashboard-api-deployment.yaml
- path: patches/dashboard-auth-deployment-resources.yaml
- path: patches/dashboard-auth-deployment.yaml
- path: patches/dashboard-kong-deployment-resources.yaml
- path: patches/dashboard-kong-deployment.yaml
- path: patches/dashboard-metrics-scraper-deployment-resources.yaml
- path: patches/dashboard-metrics-scraper-deployment.yaml
- path: patches/dashboard-web-deployment-resources.yaml
- path: patches/dashboard-web-deployment.yaml

images:
 - name: kong
   newName: registry.lan/kubernetesui-kong
 - name: docker.io/kubernetesui/dashboard-api
   newName: registry.lan/kubernetesui-dashboard-api
 - name: docker.io/kubernetesui/dashboard-auth
   newName: registry.lan/kubernetesui-dashboard-auth
 - name: docker.io/kubernetesui/dashboard-metrics-scraper
   newName: registry.lan/kubernetesui-dashboard-metrics-scraper
 - name: docker.io/kubernetesui/dashboard-web
   newName: registry.lan/kubernetesui-dashboard-web
