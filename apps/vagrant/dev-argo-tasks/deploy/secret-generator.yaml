apiVersion: viaduct.ai/v1
kind: ksops
metadata:
  name: secret-generator
  annotations:
    config.kubernetes.io/function: |
        exec:
          path: ksops
secretFrom:
- metadata:
    name: minio-credentials
    annotations:
      kustomize.config.k8s.io/needs-hash: "false"
      kustomize.config.k8s.io/behavior: replace
  type: Opaque
  envs:
  - secret/minio-credentials.env
- metadata:
    name: git-credentials
    annotations:
      kustomize.config.k8s.io/needs-hash: "false"
      kustomize.config.k8s.io/behavior: replace
  type: Opaque
  envs:
  - secret/git-credentials.env
- metadata:
    name: rsync-source
    annotations:
      kustomize.config.k8s.io/needs-hash: "false"
      kustomize.config.k8s.io/behavior: replace
  type: Opaque
  files:
  - secret/rsync/ssh_config
  - secret/rsync/id_rsa
