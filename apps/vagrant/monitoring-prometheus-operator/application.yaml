apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: monitoring-prometheus-operator
  namespace: dev-argo-cd
  # Add this finalizer ONLY if you want these to cascade delete.
  #finalizers:
  #  - resources-finalizer.argocd.argoproj.io
  labels:
    app.kubernetes.io/name: gitea
spec:
  project: k8s-cluster

  source:
    repoURL: http://gitea.dev-gitea.svc.cluster.local:3000/MyOrg/home-server.git
    targetRevision: develop
    path: apps/vagrant/monitoring-prometheus-operator/deploy
  
  destination:
    server: https://kubernetes.default.svc
    namespace: monitoring-prometheus-operator

  syncPolicy:
    syncOptions:
    - PruneLast=true # Allow the ability for resource pruning to happen as a final, implicit wave of a sync operation
