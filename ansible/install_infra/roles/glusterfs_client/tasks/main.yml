---
- name: Install GlusterFS client
  ansible.builtin.apt:
    pkg:
      - glusterfs-client
    state: present

- name: Mount volumes
  ansible.posix.mount:
    state: mounted
    path: "{{ item.value.mount_path }}"
    src: "{{ groups['glusterfs_servers'][0] }}:/{{ item.key }}"
    fstype: "glusterfs"
  loop: "{{ glusterfs_volume_mounts | default({}) | dict2items }}"
