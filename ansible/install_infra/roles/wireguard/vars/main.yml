---

wireguard_ufw_applications:
  - name: wireguard
    title: Wireguard server
    description: Wireguard server
    ports: "{{ wireguard_server_listen_port }}/udp"
    rule: allow

wireguard:
  config_dir: /etc/wireguard
  cidr_prefix: "{{ wireguard_cidr_prefix | mandatory }}"

  server:
    interface: "{{ wireguard_server_interface }}"
    listen_port: "{{ wireguard_server_listen_port }}"
    endpoint: "{{ wireguard_server_endpoint }}"
    keys_dir: /etc/wireguard
    clients_dir: /etc/wireguard/clients
  
  clients: "{{ wireguard_clients | default({}) }}"

  keepalived_instance:
    name: wireguard
    virtual_router_id: 104
    is_master: "{{ wireguard_keepalived_instance_is_master | default('false') }}"
    interface: "{{ wireguard_keepalived_instance_interface }}"
    priority: "{{ wireguard_keepalived_instance_priority | default(100) }}"
    auth_pass: "{{ wireguard_keepalived_instance_auth_pass }}"
    virtual_ip: "{{ wireguard_keepalived_instance_virtual_ip }}"
