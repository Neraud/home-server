---

- name: Install multus pod network add-on
  k8s:
    definition: "{{ lookup('template', 'multus/multus-daemonset.yml.j2') }}"
    state: present
  become: yes
  become_user: "{{ kubernetes_user.name }}"

- name: Deploy multus additional interfaces
  k8s:
    definition: "{{ lookup('template', item) }}"
    state: present
  with_fileglob:
    - "templates/multus/interfaces/*.yml.j2"
  become: yes
  become_user: "{{ kubernetes_user.name }}"
