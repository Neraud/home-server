---
- name: Provision applications
  hosts: controller
  gather_facts: no
  roles:
    - { role: cluster-kubernetes-replicator, tags: kubernetes-app-cluster-kubernetes-replicator, when: kubernetes_replicator_enabled | bool }
    - { role: dev-minio,                     tags: kubernetes-app-dev-minio,                     when: minio_enabled | bool }
    - { role: dev-argo-workflows,            tags: kubernetes-app-dev-argo-workflows,            when: argo_workflows_enabled | bool }
    - { role: dev-argo-events,               tags: kubernetes-app-dev-argo-events,               when: argo_events_enabled | bool }
    - { role: dev-argo-cd,                   tags: kubernetes-app-dev-argo-cd,                   when: argo_cd_enabled | bool }
    - { role: dev-argo-tasks,                tags: kubernetes-app-dev-argo-tasks,                when: argo_tasks_enabled | bool }
    - { role: auth-openldap,                 tags: kubernetes-app-auth-lemonldap,                when: openldap_enabled | bool }
    - { role: auth-lemonldap,                tags: kubernetes-app-auth-lemonldap,                when: lemonldap_enabled | bool }
    - { role: auth-phpldapadmin,             tags: kubernetes-app-auth-phpldapadmin,             when: phpldapadmin_enabled | bool }
    - { role: dev-gitea,                     tags: kubernetes-app-dev-gitea,                     when: gitea_enabled | bool }
    - { role: download-deluge,               tags: kubernetes-app-download-deluge,               when: deluge_enabled | bool }
    - { role: download-pyload,               tags: kubernetes-app-download-pyload,               when: pyload_enabled | bool }
    - { role: download-sabnzbd,              tags: kubernetes-app-download-sabnzbd,              when: sabnzbd_enabled | bool }
    - { role: download-sickchill,            tags: kubernetes-app-download-sickchill,            when: sickchill_enabled | bool }
    - { role: home-esphome,                  tags: kubernetes-app-home-esphome,                  when: esphome_enabled | bool }
    - { role: home-frigate,                  tags: kubernetes-app-home-frigate,                  when: frigate_enabled | bool }
    - { role: home-homeassistant,            tags: kubernetes-app-home-homeassistant,            when: homeassistant_enabled | bool }
    - { role: home-mosquitto,                tags: kubernetes-app-home-mosquitto,                when: mosquitto_enabled | bool }
    - { role: home-nodered,                  tags: kubernetes-app-home-nodered,                  when: nodered_enabled | bool }
    - { role: home-roomassistant,            tags: kubernetes-app-home-roomassistant,            when: roomassistant_enabled | bool }
    - { role: home-zigbee2mqtt,              tags: kubernetes-app-home-zigbee2mqtt,              when: zigbee2mqtt_enabled | bool }
    - { role: home-zwavejsui,                tags: kubernetes-app-home-zwavejsui,                when: zwavejsui_enabled | bool }
    - { role: infra-blocky,                  tags: kubernetes-app-infra-blocky,                  when: blocky_enabled | bool }
    - { role: infra-crowdsec,                tags: kubernetes-app-infra-crowdsec,                when: crowdsec_enabled | bool }
