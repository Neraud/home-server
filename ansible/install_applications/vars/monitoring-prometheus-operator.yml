---
prometheus_operator:
  enabled: "{{ prometheus_operator_enabled | default(True) }}"

  container:
    repo: quay.io
    image: "coreos/prometheus-operator"
    tag: "v0.32.0"
    requests_cpu: "{{ prometheus_operator_container_requests_cpu | default('100m') }}"
    requests_memory: "{{ prometheus_operator_container_requests_memory | default('100Mi') }}"
    limits_cpu: "{{ prometheus_operator_container_limits_cpu | default('200m') }}"
    limits_memory: "{{ prometheus_operator_container_limits_memory | default('200Mi') }}"

prometheus:
  retention: "{{ prometheus_retention | default('7d') }}"
  allowed_namespaces: "{{ prometheus_allowed_namespaces | default(prometheus_allowed_namespaces_default) }}"

  container:
    repo: quay.io
    image: "prometheus/prometheus"
    tag: "v2.11.0"
    requests_cpu: "{{ prometheus_container_requests_cpu | default('200m') }}"
    requests_memory: "{{ prometheus_container_requests_memory | default('512Mi') }}"
    limits_cpu: "{{ prometheus_container_limits_cpu | default('500m') }}"
    limits_memory: "{{ prometheus_container_limits_memory | default('512Mi') }}"

prometheus_allowed_namespaces_default:
  - default
  - kube-system
  - ingress-nginx
  - monitoring
  - logging

alertmanager:
  container:
    repo: quay.io
    image: "prometheus/alertmanager"
    tag: "v0.18.0"
    requests_cpu: "{{ alertmanager_container_requests_cpu | default('100m') }}"
    requests_memory: "{{ alertmanager_container_requests_memory | default('128Mi') }}"
    limits_cpu: "{{ alertmanager_container_limits_cpu | default('250m') }}"
    limits_memory: "{{ alertmanager_container_limits_memory | default('128Mi') }}"

  smtp:
    enabled: "{{ alertmanager_smtp_enabled | default(True) }}"
    smarthost: "{{ alertmanager_smtp_smarthost | default(zonemta.smtp_servername + ':587') }}"
    require_tls: "{{ alertmanager_smtp_require_tls | default(True) }}"
    from: "{{ alertmanager_smtp_from | default('alertmanager@' + web_base_domain) }}"
    auth_username: "{{ alertmanager_smtp_auth_username | default(zonemta.feeder.authentication_username) }}"
    auth_password: "{{ alertmanager_smtp_auth_password | default(zonemta.feeder.authentication_password) }}"

  default_receiver: "{{ alertmanager_default_receiver | default('default') }}"
  receivers: "{{ alertmanager_receivers | default([]) }}"

service_monitors:
  # Multiply all scrap intervals with this factor.
  # For example, a standard 30s interval with a factor 2 becomes 60s
  interval_factor: "{{ service_monitors_interval_factor | default(1) }}"
